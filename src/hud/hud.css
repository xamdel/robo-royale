/* Set root variables for scaling */
:root {
  --hud-scale: 1;
  --hud-primary-color: #00aaff;
  --hud-warning-color: #ff9900;
  --hud-danger-color: #ff0000;
  --hud-success-color: #00ff00;
  --hud-bg-color: rgba(0, 20, 40, 0.5);
  --hud-glow: 0 0 5px rgba(0, 170, 255, 0.7);
}

/* HUD Container */
#mech-hud {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  font-family: 'Orbitron', 'Roboto Mono', monospace;
  color: var(--hud-primary-color);
  text-shadow: var(--hud-glow);
  z-index: 1000;
}

/* Bottom elements - standard TPS health/ammo bars */
.bottom-element {
  position: absolute;
  display: flex;
  align-items: center;
  background-color: rgba(0, 20, 40, 0.3);
  border: calc(1px * var(--hud-scale)) solid var(--hud-primary-color);
  border-radius: calc(5px * var(--hud-scale));
  padding: calc(6px * var(--hud-scale));
  box-shadow: var(--hud-glow);
}

.health-container {
  left: calc(20px * var(--hud-scale));
  bottom: calc(20px * var(--hud-scale));
  width: calc(260px * var(--hud-scale));
}

.weapon-container {
  width: calc(260px * var(--hud-scale));
  flex-direction: column;
}

.weapons-container {
  right: calc(20px * var(--hud-scale));
  bottom: calc(20px * var(--hud-scale));
  width: calc(300px * var(--hud-scale));
  flex-direction: column;
  padding: calc(10px * var(--hud-scale));
}

.weapon-section {
  width: 100%;
  margin-bottom: calc(5px * var(--hud-scale));
}

.weapon-row {
  display: flex;
  align-items: center;
  width: 100%;
}

.status-name-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
}

.weapon-divider {
  width: 100%;
  height: calc(1px * var(--hud-scale));
  background-color: var(--hud-primary-color);
  margin: calc(8px * var(--hud-scale)) 0;
  box-shadow: var(--hud-glow);
}

.ammo-cooldown-container {
  display: flex;
  flex-direction: column;
  width: 100%;
  margin-top: calc(3px * var(--hud-scale));
}

/* Icon styling */
.status-icon {
  width: calc(30px * var(--hud-scale));
  height: calc(30px * var(--hud-scale));
  margin-right: calc(10px * var(--hud-scale));
  color: var(--hud-primary-color);
}

.status-icon svg {
  width: 100%;
  height: 100%;
}

/* Bar wrappers */
.bar-wrapper {
  flex: 1;
  position: relative;
  height: calc(20px * var(--hud-scale));
  background-color: rgba(0, 0, 0, 0.5);
  border: calc(1px * var(--hud-scale)) solid var(--hud-primary-color);
  border-radius: calc(3px * var(--hud-scale));
  overflow: hidden;
}

/* Health System */
.health-bar {
  height: 100%;
  width: 100%;
  background-color: var(--hud-primary-color);
  transition: width 0.3s ease, background-color 0.3s ease;
}

.health-percent {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: calc(12px * var(--hud-scale));
  text-shadow: 0 0 3px #000, 0 0 3px #000;
}

.health-segments {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: row;
  pointer-events: none;
}

.health-segments .segment {
  flex: 1;
  height: 100%;
  border-right: calc(1px * var(--hud-scale)) solid rgba(0, 0, 0, 0.3);
  background-color: rgba(255, 255, 255, 0.2);
  transition: background-color 0.3s ease;
}

.health-segments .segment.active {
  background-color: rgba(0, 170, 255, 0.7);
}

.health-segments .segment:last-child {
  border-right: none;
}

/* Weapon System */
.weapon-header {
  font-size: calc(10px * var(--hud-scale));
  background-color: rgba(0, 40, 80, 0.6);
  text-align: center;
  width: 100%;
  padding: calc(2px * var(--hud-scale));
  margin-bottom: calc(5px * var(--hud-scale));
  border-bottom: calc(1px * var(--hud-scale)) solid var(--hud-primary-color);
  text-transform: uppercase;
  letter-spacing: calc(1px * var(--hud-scale));
}

.weapon-info {
  display: flex;
  flex-direction: column;
  width: 100%;
}

.weapon-status {
  font-size: calc(12px * var(--hud-scale));
  margin-right: calc(5px * var(--hud-scale));
}

.weapon-name {
  font-size: calc(14px * var(--hud-scale));
  font-weight: bold;
}

.next-weapon {
  font-size: calc(10px * var(--hud-scale));
  text-align: right;
  color: rgba(0, 170, 255, 0.7);
  margin-top: calc(2px * var(--hud-scale));
  width: 100%;
}

.key-binding {
  font-size: calc(9px * var(--hud-scale));
  text-align: center;
  margin-top: calc(5px * var(--hud-scale));
  color: rgba(255, 255, 255, 0.8);
  background-color: rgba(0, 0, 0, 0.3);
  padding: calc(2px * var(--hud-scale));
  border-radius: calc(2px * var(--hud-scale));
}

.key-hint {
  color: rgba(0, 170, 255, 0.8);
  font-style: italic;
}

.ammo-display {
  display: flex;
  flex-direction: column;
  width: 100%;
  margin-bottom: calc(5px * var(--hud-scale));
}

.ammo-counter {
  font-size: calc(14px * var(--hud-scale));
  font-weight: bold;
  text-align: center;
  margin-bottom: calc(3px * var(--hud-scale));
}

.ammo-segments {
  height: calc(6px * var(--hud-scale));
  width: 100%;
  display: flex;
  flex-direction: row;
}

.ammo-segments .segment {
  flex: 1;
  height: 100%;
  margin: 0 calc(1px * var(--hud-scale));
  background-color: rgba(255, 255, 255, 0.2);
  transition: background-color 0.3s ease;
}

.ammo-segments .segment.active {
  background-color: rgba(0, 255, 0, 0.7);
}

.status-active {
  color: var(--hud-success-color);
  text-shadow: 0 0 5px rgba(0, 255, 0, 0.7);
}

.status-inactive {
  color: var(--hud-danger-color);
  text-shadow: 0 0 5px rgba(255, 0, 0, 0.7);
}

.status-charging {
  color: var(--hud-warning-color);
  text-shadow: 0 0 5px rgba(255, 153, 0, 0.7);
}

.cooldown-bar {
  height: calc(4px * var(--hud-scale));
  width: 0%;
  background-color: var(--hud-primary-color);
  transition: width 0.2s linear, background-color 0.2s linear;
  border-radius: calc(2px * var(--hud-scale));
  margin-top: calc(3px * var(--hud-scale));
}

/* Corner elements */
.corner-element {
  position: absolute;
  border-radius: calc(5px * var(--hud-scale));
}

.top-left {
  top: calc(20px * var(--hud-scale));
  left: calc(20px * var(--hud-scale));
}

/* Scanner System */
.scanner-container {
  display: flex;
  align-items: center;
  justify-content: center;
}

.scanner-display {
  width: calc(80px * var(--hud-scale));
  height: calc(80px * var(--hud-scale));
  border-radius: 50%;
  border: calc(1px * var(--hud-scale)) solid var(--hud-primary-color);
  background-color: rgba(0, 20, 40, 0.7);
  position: relative;
  overflow: hidden;
  box-shadow: var(--hud-glow), inset 0 0 calc(10px * var(--hud-scale)) rgba(0, 0, 0, 0.5);
}

.scanner-label {
  position: absolute;
  top: calc(5px * var(--hud-scale));
  left: 50%;
  transform: translateX(-50%);
  font-size: calc(8px * var(--hud-scale));
  text-transform: uppercase;
  letter-spacing: calc(1px * var(--hud-scale));
  z-index: 1;
}

.scanner-grid {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image:
    linear-gradient(to right, rgba(0, 170, 255, 0.2) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(0, 170, 255, 0.2) 1px, transparent 1px);
  background-size: calc(10px * var(--hud-scale)) calc(10px * var(--hud-scale));
  opacity: 0.5;
}

.scanner-sweep {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 50%;
  height: 50%;
  margin-top: -50%;
  margin-left: 0;
  background: linear-gradient(90deg, transparent 50%, rgba(0, 170, 255, 0.4) 100%);
  border-radius: 50%;
  transform-origin: 0 100%;
  animation: sweep 4s infinite linear;
}

@keyframes sweep {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.player-indicator {
  position: absolute;
  top: 50%;
  left: 50%;
  width: calc(6px * var(--hud-scale));
  height: calc(6px * var(--hud-scale));
  margin-left: calc(-3px * var(--hud-scale));
  margin-top: calc(-3px * var(--hud-scale));
  background-color: var(--hud-primary-color);
  border-radius: 50%;
  box-shadow: var(--hud-glow);
  z-index: 2;
}

.enemy-indicator {
  position: absolute;
  width: calc(4px * var(--hud-scale));
  height: calc(4px * var(--hud-scale));
  margin-left: calc(-2px * var(--hud-scale));
  margin-top: calc(-2px * var(--hud-scale));
  background-color: var(--hud-danger-color);
  border-radius: 50%;
  box-shadow: 0 0 5px rgba(255, 0, 0, 0.7);
  z-index: 2;
}

/* Target Reticle */
.target-reticle {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: calc(40px * var(--hud-scale));
  height: calc(40px * var(--hud-scale));
}

.reticle-part {
  position: absolute;
  background-color: rgba(0, 170, 255, 0.7);
}

.reticle-top {
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: calc(2px * var(--hud-scale));
  height: calc(10px * var(--hud-scale));
}

.reticle-right {
  top: 50%;
  right: 0;
  transform: translateY(-50%);
  width: calc(10px * var(--hud-scale));
  height: calc(2px * var(--hud-scale));
}

.reticle-bottom {
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: calc(2px * var(--hud-scale));
  height: calc(10px * var(--hud-scale));
}

.reticle-left {
  top: 50%;
  left: 0;
  transform: translateY(-50%);
  width: calc(10px * var(--hud-scale));
  height: calc(2px * var(--hud-scale));
}

.reticle-center {
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: calc(4px * var(--hud-scale));
  height: calc(4px * var(--hud-scale));
  border-radius: 50%;
  background-color: transparent;
  border: calc(1px * var(--hud-scale)) solid rgba(0, 170, 255, 0.7);
}

/* Alert System */
.alert-container {
  position: absolute;
  top: calc(100px * var(--hud-scale));
  left: 50%;
  transform: translateX(-50%);
  width: calc(300px * var(--hud-scale));
  display: flex;
  flex-direction: column;
  align-items: center;
}

.alert {
  width: 100%;
  padding: calc(10px * var(--hud-scale));
  margin-bottom: calc(10px * var(--hud-scale));
  text-align: center;
  border-radius: calc(5px * var(--hud-scale));
  font-size: calc(14px * var(--hud-scale));
  font-weight: bold;
  animation: fadeIn 0.3s ease;
  opacity: 0.9;
}

.alert-fade {
  animation: fadeOut 0.5s ease forwards;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(calc(-20px * var(--hud-scale))); }
  to { opacity: 0.9; transform: translateY(0); }
}

@keyframes fadeOut {
  from { opacity: 0.9; transform: translateY(0); }
  to { opacity: 0; transform: translateY(calc(-20px * var(--hud-scale))); }
}

.alert-info {
  background-color: rgba(0, 100, 200, 0.7);
  border: calc(1px * var(--hud-scale)) solid var(--hud-primary-color);
  color: white;
}

.alert-warning {
  background-color: rgba(200, 100, 0, 0.7);
  border: calc(1px * var(--hud-scale)) solid var(--hud-warning-color);
  color: white;
}

.alert-danger {
  background-color: rgba(200, 0, 0, 0.7);
  border: calc(1px * var(--hud-scale)) solid var(--hud-danger-color);
  color: white;
}

/* Message Logs */
.message-logs {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  right: calc(20px * var(--hud-scale));
  width: calc(300px * var(--hud-scale));
  max-height: calc(200px * var(--hud-scale));
  overflow: hidden;
  display: flex;
  flex-direction: column;
  background-color: transparent; /* Changed */
  /* border: calc(1px * var(--hud-scale)) solid var(--hud-primary-color); Removed */
  border-radius: calc(5px * var(--hud-scale));
  padding: calc(5px * var(--hud-scale));
}

.message-title {
  text-align: center;
  font-size: calc(12px * var(--hud-scale));
  text-transform: uppercase;
  letter-spacing: calc(1px * var(--hud-scale));
  margin-bottom: calc(5px * var(--hud-scale));
  border-bottom: calc(1px * var(--hud-scale)) solid var(--hud-primary-color);
  padding-bottom: calc(3px * var(--hud-scale));
}

.message-title span {
  position: relative;
  padding: 0 calc(10px * var(--hud-scale));
}

.message-title span::before,
.message-title span::after {
  content: '';
  position: absolute;
  top: 50%;
  width: calc(5px * var(--hud-scale));
  height: calc(1px * var(--hud-primary-color));
  background-color: var(--hud-primary-color);
}

.message-title span::before {
  left: 0;
}

.message-title span::after {
  right: 0;
}

.message {
  background-color: rgba(0, 20, 40, 0.5);
  border-radius: calc(3px * var(--hud-scale));
  padding: calc(5px * var(--hud-scale)) calc(20px * var(--hud-scale));
  margin-bottom: calc(5px * var(--hud-scale));
  font-size: calc(12px * var(--hud-scale));
  animation: fadeIn 0.3s ease; /* Removed pulse */
  transition: opacity 0.5s ease-out; /* Added for fade out */
  position: relative;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7); /* Added for readability */
}

.message::before {
  content: '>';
  position: absolute;
  left: calc(8px * var(--hud-scale));
  top: calc(5px * var(--hud-scale));
  color: var(--hud-primary-color);
}

/* Removed messagePulse keyframes */

/* Tech overlay effect */
#mech-hud::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background:
    radial-gradient(
      ellipse at center,
      transparent 70%,
      rgba(0, 20, 40, 0.3) 100%
    ),
    linear-gradient(
      to bottom,
      transparent 95%,
      rgba(0, 170, 255, 0.1) 100%
    );
  pointer-events: none;
}

/* Futuristic tech details */
.health-container::before,
.weapon-container::before {
  content: '';
  position: absolute;
  width: calc(5px * var(--hud-scale));
  height: calc(10px * var(--hud-scale));
  background-color: transparent;
}

.health-container::before {
  left: calc(-5px * var(--hud-scale));
  top: 50%;
  transform: translateY(-50%);
  border-top: calc(1px * var(--hud-scale)) solid var(--hud-primary-color);
  border-left: calc(1px * var(--hud-scale)) solid var(--hud-primary-color);
  border-bottom: calc(1px * var(--hud-scale)) solid var(--hud-primary-color);
}

.weapon-container::before {
  right: calc(-5px * var(--hud-scale));
  top: 50%;
  transform: translateY(-50%);
  border-top: calc(1px * var(--hud-scale)) solid var(--hud-primary-color);
  border-right: calc(1px * var(--hud-scale)) solid var(--hud-primary-color);
  border-bottom: calc(1px * var(--hud-scale)) solid var(--hud-primary-color);
}


/* Weapon Pickup Context Menu - Bullseye Style */
#weapon-context-menu {
  position: absolute; /* Positioned by JS */
  width: calc(220px * var(--hud-scale));
  height: calc(220px * var(--hud-scale));
  color: var(--hud-primary-color);
  pointer-events: none; /* Container is non-interactive */
  z-index: 2000;
  font-family: 'Orbitron', 'Roboto Mono', monospace;
  text-shadow: var(--hud-glow);
  transition: opacity 0.2s ease-in-out;
  border-radius: 50%;
}

.context-menu-quadrant {
  position: absolute;
  width: 50%;
  height: 50%;
  pointer-events: auto; /* Quadrants are interactive */
  transition: background-color 0.1s ease;
}

/* Positioning Quadrants in a bullseye arrangement - two above, two below */
.context-menu-quadrant[data-mount-id="rightShoulder"] { /* Top Right */
  top: 0;
  left: 50%;
  width: 50%;
  height: 50%;
  transform-origin: bottom left;
}
.context-menu-quadrant[data-mount-id="leftShoulder"] { /* Top Left */
  top: 0;
  left: 0;
  width: 50%;
  height: 50%;
  transform-origin: bottom right;
}
.context-menu-quadrant[data-mount-id="rightArm"] { /* Bottom Right */
  top: 50%;
  left: 50%;
  width: 50%;
  height: 50%;
  transform-origin: top left;
}
.context-menu-quadrant[data-mount-id="leftArm"] { /* Bottom Left */
  top: 50%;
  left: 0;
  width: 50%;
  height: 50%;
  transform-origin: top right;
}

/* Arc Visual - Using a single complete circle */
#weapon-context-menu::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: calc(20px * var(--hud-scale)) solid rgba(0, 30, 60, 0.85);
  border-radius: 50%;
  box-sizing: border-box;
  pointer-events: none;
  z-index: 1;
}

/* Hide the original pseudo-elements in quadrants */
.context-menu-quadrant::before {
  display: none;
}

/* Highlight - We'll use an overlay for highlighting */
.context-menu-quadrant-highlight {
  position: absolute;
  width: 50%;
  height: 50%;
  border: calc(20px * var(--hud-scale)) solid transparent;
  border-radius: 50%;
  box-sizing: border-box;
  pointer-events: none;
  z-index: 2;
  opacity: 0;
  transition: opacity 0.1s ease;
}

/* Position the highlight overlays */
.context-menu-quadrant-highlight[data-mount-id="rightShoulder"] {
  top: -50%;
  right: -50%;
  border-top-color: rgba(0, 170, 255, 0.8);
}

.context-menu-quadrant-highlight[data-mount-id="leftShoulder"] {
  top: -50%;
  left: -50%;
  border-top-color: rgba(0, 170, 255, 0.8);
}

.context-menu-quadrant-highlight[data-mount-id="rightArm"] {
  bottom: -50%;
  right: -50%;
  border-bottom-color: rgba(0, 170, 255, 0.8);
}

.context-menu-quadrant-highlight[data-mount-id="leftArm"] {
  bottom: -50%;
  left: -50%;
  border-bottom-color: rgba(0, 170, 255, 0.8);
}

/* Show highlight when quadrant is highlighted */
.context-menu-quadrant.highlighted .context-menu-quadrant-highlight {
  opacity: 1;
}

/* Unavailable State */
.context-menu-quadrant.unavailable {
  opacity: 0.4;
}
.context-menu-quadrant.unavailable .quadrant-label {
  color: grey;
  text-shadow: none;
}

/* Text Label Styling */
.quadrant-label {
  position: absolute;
  font-size: calc(10px * var(--hud-scale));
  font-weight: normal;
  color: var(--hud-primary-color);
  text-shadow: var(--hud-glow);
  z-index: 2;
  pointer-events: none;
  background-color: rgba(0, 10, 20, 0.8);
  padding: calc(2px * var(--hud-scale)) calc(4px * var(--hud-scale));
  border-radius: calc(2px * var(--hud-scale));
  white-space: nowrap;
}

/* Label Positioning inside the arcs */
.context-menu-quadrant[data-mount-id="rightShoulder"] .quadrant-label {
  top: 25%;
  right: 25%;
  transform: translate(0, 0);
}
.context-menu-quadrant[data-mount-id="leftShoulder"] .quadrant-label {
  top: 25%;
  left: 25%;
  transform: translate(0, 0);
}
.context-menu-quadrant[data-mount-id="rightArm"] .quadrant-label {
  bottom: 25%;
  right: 25%;
  transform: translate(0, 0);
}
.context-menu-quadrant[data-mount-id="leftArm"] .quadrant-label {
  bottom: 25%;
  left: 25%;
  transform: translate(0, 0);
}

/* Center Text (Weapon Name) */
.context-menu-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: calc(80px * var(--hud-scale));
  text-align: center;
  font-size: calc(12px * var(--hud-scale));
  font-weight: bold;
  text-transform: uppercase;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  background-color: rgba(0, 20, 40, 0.8);
  padding: calc(4px * var(--hud-scale));
  border-radius: calc(3px * var(--hud-scale));
  border: 1px solid var(--hud-primary-color);
  box-shadow: var(--hud-glow);
  z-index: 3;
}
